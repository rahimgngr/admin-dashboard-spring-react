{"ast":null,"code":"import _regeneratorRuntime from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Card,InputGroup,Table,Button,FormControl,ButtonGroup}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import ToastComponent from\"./ToastComponent\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(3),_useState6=_slicedToArray(_useState5,1),usersPerPage=_useState6[0];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),show=_useState8[0],setShow=_useState8[1];// pagination set numbers\nvar lastIndex=currentPage*usersPerPage;var firstIndex=lastIndex-usersPerPage;var currentUsers=users.slice(firstIndex,lastIndex);var totalPages=Math.ceil(users.length/usersPerPage);useEffect(function(){axios.get(\"http://localhost:8080/admin/get\").then(function(res){return setUsers(res.data);});},[]);// delete data with spesific id\nvar deleteUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(userId){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.delete(\"http://localhost:8080/admin/ \".concat(userId)).then(function(res){if(res.data!=null){setShow(true);setUsers(users.filter(function(user){return user.id!==userId;}));setTimeout(function(){return setShow(false);},1500);}else{setShow(false);}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function deleteUser(_x){return _ref.apply(this,arguments);};}();// Button pagination stuff\nvar firstPage=function firstPage(){if(currentPage>1){setCurrentPage(1);}};var prevPage=function prevPage(){if(currentPage>1){setCurrentPage(currentPage-1);}};var lastPage=function lastPage(){if(currentPage<Math.ceil(users.length/usersPerPage)){setCurrentPage(Math.ceil(users.length/usersPerPage));}};var nextPage=function nextPage(){if(currentPage<Math.ceil(users.length/usersPerPage)){setCurrentPage(currentPage+1);}};// formcontrol page number control stuff\nvar changePage=function changePage(e){setCurrentPage(e.target.value<=totalPages?e.target.value:totalPages);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Card,{className:\"border border-dark bg-dark text-white\",style:{margin:\"45px 0\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:show?\"block\":\"none\"},children:/*#__PURE__*/_jsx(ToastComponent,{children:{show:show,message:\"User Deleted!\",type:\"danger\"}})}),/*#__PURE__*/_jsx(Card.Header,{children:\"Users List\"}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Role\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.length===0?/*#__PURE__*/_jsx(\"tr\",{align:\"center\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",children:\"No Users Found..\"})}):currentUsers.map(function(user,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.userName}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(ButtonGroup,{children:[/*#__PURE__*/_jsx(Link,{to:\"/edit-user/\"+user.id,className:\"btn btn-sm btn-outline-primary\",children:\"edit\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"outline-danger\",onClick:function onClick(){return deleteUser(user.id);},children:\"delete\"})]})})]},user.id?user.id:index);})})]})}),/*#__PURE__*/_jsxs(Card.Footer,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{float:\"left\"},children:[\" \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"div\",{style:{float:\"right\"},children:/*#__PURE__*/_jsxs(InputGroup,{size:\"sm\",children:[/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline-info\",disabled:currentPage===1?true:false,onClick:firstPage,children:\"First\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline-info\",disabled:currentPage===1?true:false,onClick:prevPage,children:\"Prev\"}),/*#__PURE__*/_jsx(FormControl,{style:{textAlign:\"center\",width:\"40px\",color:\"white\"},className:\"bg-dark\",name:\"currentPage\",defaultValue:currentPage,onChange:changePage}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline-info\",disabled:currentPage===totalPages?true:false,onClick:nextPage,children:\"Next\"}),/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"outline-info\",disabled:currentPage===totalPages?true:false,onClick:lastPage,children:\"Last\"})]})})]})]})});}","map":{"version":3,"sources":["/home/rahimgng/vscode/admin-dashboard/src/component/UserList.js"],"names":["React","useState","useEffect","axios","Card","InputGroup","Table","Button","FormControl","ButtonGroup","Link","ToastComponent","UserList","users","setUsers","currentPage","setCurrentPage","usersPerPage","show","setShow","lastIndex","firstIndex","currentUsers","slice","totalPages","Math","ceil","length","get","then","res","data","deleteUser","userId","delete","filter","user","id","setTimeout","firstPage","prevPage","lastPage","nextPage","changePage","e","target","value","margin","display","message","type","map","index","userName","role","float","textAlign","width","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport {\n  Card,\n  InputGroup,\n  Table,\n  Button,\n  FormControl,\n  ButtonGroup,\n} from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport ToastComponent from \"./ToastComponent\";\n\nexport default function UserList() {\n  const [users, setUsers] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [usersPerPage] = useState(3);\n  const [show, setShow] = useState(false);\n\n  // pagination set numbers\n  const lastIndex = currentPage * usersPerPage;\n  const firstIndex = lastIndex - usersPerPage;\n  const currentUsers = users.slice(firstIndex, lastIndex);\n  const totalPages = Math.ceil(users.length / usersPerPage);\n\n  useEffect(() => {\n    axios\n      .get(\"http://localhost:8080/admin/get\")\n      .then((res) => setUsers(res.data));\n  }, []);\n\n  // delete data with spesific id\n  const deleteUser = async (userId) => {\n    await axios.delete(`http://localhost:8080/admin/ ${userId}`).then((res) => {\n      if (res.data != null) {\n        setShow(true);\n        setUsers(users.filter((user) => user.id !== userId));\n        setTimeout(() => setShow(false), 1500);\n      } else {\n        setShow(false);\n      }\n    });\n  };\n\n  // Button pagination stuff\n  const firstPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(1);\n    }\n  };\n  const prevPage = () => {\n    if (currentPage > 1) {\n      setCurrentPage(currentPage - 1);\n    }\n  };\n  const lastPage = () => {\n    if (currentPage < Math.ceil(users.length / usersPerPage)) {\n      setCurrentPage(Math.ceil(users.length / usersPerPage));\n    }\n  };\n  const nextPage = () => {\n    if (currentPage < Math.ceil(users.length / usersPerPage)) {\n      setCurrentPage(currentPage + 1);\n    }\n  };\n\n  // formcontrol page number control stuff\n  const changePage = (e) => {\n    setCurrentPage(e.target.value <= totalPages ? e.target.value : totalPages);\n  };\n\n  return (\n    <div>\n      <Card\n        className={\"border border-dark bg-dark text-white\"}\n        style={{ margin: \"45px 0\" }}\n      >\n        <div style={{ display: show ? \"block\" : \"none\" }}>\n          <ToastComponent\n            children={{\n              show: show,\n              message: \"User Deleted!\",\n              type: \"danger\",\n            }}\n          />\n        </div>\n        <Card.Header>Users List</Card.Header>\n        <Card.Body>\n          <Table striped bordered hover variant=\"dark\">\n            <thead>\n              <tr>\n                <td>Username</td>\n                <td>Role</td>\n              </tr>\n            </thead>\n            <tbody>\n              {users.length === 0 ? (\n                <tr align=\"center\">\n                  <td colSpan=\"2\">No Users Found..</td>\n                </tr>\n              ) : (\n                currentUsers.map((user, index) => (\n                  <tr key={user.id ? user.id : index}>\n                    <td>{user.userName}</td>\n                    <td>{user.role}</td>\n                    <td>\n                      <ButtonGroup>\n                        <Link\n                          to={\"/edit-user/\" + user.id}\n                          className=\"btn btn-sm btn-outline-primary\"\n                        >\n                          edit\n                        </Link>\n\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline-danger\"\n                          onClick={() => deleteUser(user.id)}\n                        >\n                          delete\n                        </Button>\n                      </ButtonGroup>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </Table>\n        </Card.Body>\n        <Card.Footer>\n          <div style={{ float: \"left\" }}>\n            {\" \"}\n            {currentPage} of {totalPages}\n          </div>\n          <div style={{ float: \"right\" }}>\n            <InputGroup size=\"sm\">\n              <Button\n                type=\"button\"\n                variant=\"outline-info\"\n                disabled={currentPage === 1 ? true : false}\n                onClick={firstPage}\n              >\n                First\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline-info\"\n                disabled={currentPage === 1 ? true : false}\n                onClick={prevPage}\n              >\n                Prev\n              </Button>\n\n              <FormControl\n                style={{\n                  textAlign: \"center\",\n                  width: \"40px\",\n                  color: \"white\",\n                }}\n                className={\"bg-dark\"}\n                name=\"currentPage\"\n                defaultValue={currentPage}\n                onChange={changePage}\n              />\n\n              <Button\n                type=\"button\"\n                variant=\"outline-info\"\n                disabled={currentPage === totalPages ? true : false}\n                onClick={nextPage}\n              >\n                Next\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline-info\"\n                disabled={currentPage === totalPages ? true : false}\n                onClick={lastPage}\n              >\n                Last\n              </Button>\n            </InputGroup>\n          </div>\n        </Card.Footer>\n      </Card>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}