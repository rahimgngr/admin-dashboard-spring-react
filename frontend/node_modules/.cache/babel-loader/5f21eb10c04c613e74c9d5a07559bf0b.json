{"ast":null,"code":"import _defineProperty from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/rahimgng/vscode/admin-dashboard/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Card,Form,Button,Col}from\"react-bootstrap\";import\"bootstrap/dist/css/bootstrap.css\";import axios from\"axios\";import ToastComponent from\"./ToastComponent\";import{useHistory,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var values={id:\"\",userName:\"\",role:\"\",password:\"\"};function AddUser(){var _useState=useState(values),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),method=_useState4[0],setMethod=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var history=useHistory();var _useParams=useParams(),id=_useParams.id;// user data save\nvar submitUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return axios.post(\"http://localhost:8080/admin/add\",JSON.stringify(form),{headers:{\"Content-Type\":\"application/json\"}}).then(function(res){if(res.data!=null){setShow(true);setMethod(\"post\");setTimeout(function(){return userList(true);},1500);setTimeout(function(){return setShow(false);},1500);}else{setShow(false);}});case 3:case\"end\":return _context.stop();}}},_callee);}));return function submitUser(_x){return _ref.apply(this,arguments);};}();// user data update\nvar updateUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return axios.put(\"http://localhost:8080/admin/put/\".concat(id),JSON.stringify(form),{headers:{\"Content-Type\":\"application/json\"}}).then(function(res){if(res.data!=null){setShow(true);setMethod(\"put\");setTimeout(function(){return setShow(false);},1500);setTimeout(function(){return userList(true);},1500);}else{setShow(false);}});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function updateUser(_x2){return _ref2.apply(this,arguments);};}();// to add in user list\nvar userChange=function userChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};// to reset user values that we wrote\nvar resetUser=function resetUser(){setForm(values);};// back to user list\nvar userList=function userList(){history.push(\"/list-users\");};// find user with id to show when we want to update\nvar findUserById=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"http://localhost:8080/admin/get/\".concat(id)).then(function(res){if(res.data!=null){setForm({id:res.data.id,userName:res.data.userName,password:res.data.password,role:res.data.role});}}).catch(function(error){console.error(error);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function findUserById(_x3){return _ref3.apply(this,arguments);};}();// for memo\nuseEffect(function(){findUserById(id);},[id]);console.log(method);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:show?\"block\":\"none\"},children:/*#__PURE__*/_jsx(ToastComponent,{children:{show:show,message:method===\"post\"?\"User Saved!\":\"User Updated!\",type:\"success\"}})}),/*#__PURE__*/_jsxs(Card,{className:\"border border-dark bg-dark text-white\",style:{margin:\"45px 0px\"},children:[/*#__PURE__*/_jsx(Card.Header,{children:id?\"Update User\":\"Save User\"}),/*#__PURE__*/_jsxs(Form,{id:\"userFormId\",onSubmit:id?updateUser:submitUser,onReset:resetUser,children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,controlId:\"fromGridUserName\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,autoComplete:\"off\",type:\"text\",name:\"userName\",placeholder:\"Enter Username\",className:\"bg-dark text-white\",onChange:userChange,value:form.userName})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,autoComplete:\"off\",type:\"password\",name:\"password\",placeholder:\"Enter pass\",className:\"bg-dark text-white\",onChange:userChange,value:form.password})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Role\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,autoComplete:\"off\",type:\"text\",name:\"role\",placeholder:\"Enter Role\",className:\"bg-dark text-white\",onChange:userChange,value:form.role})]})]}),/*#__PURE__*/_jsxs(Card.Footer,{style:{textAlign:\"right\"},children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",type:\"submit\",variant:\"success\",style:{margin:\"2px\"},children:id?\"Update\":\"Save\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",type:\"reset\",variant:\"info\",style:{margin:\"2px\"},children:\"Reset\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",type:\"button\",variant:\"info\",style:{margin:\"2px\"},onClick:userList,children:\"User List\"})]})]})]})]});}export default AddUser;","map":{"version":3,"sources":["/home/rahimgng/vscode/admin-dashboard/src/component/AddUser.js"],"names":["React","useState","useEffect","Card","Form","Button","Col","axios","ToastComponent","useHistory","useParams","values","id","userName","role","password","AddUser","form","setForm","method","setMethod","show","setShow","history","submitUser","e","preventDefault","post","JSON","stringify","headers","then","res","data","setTimeout","userList","updateUser","put","userChange","target","name","value","resetUser","push","findUserById","get","catch","error","console","log","display","message","type","margin","textAlign"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Card, Form, Button, Col } from \"react-bootstrap\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport axios from \"axios\";\nimport ToastComponent from \"./ToastComponent\";\nimport { useHistory, useParams } from \"react-router-dom\";\n\nconst values = {\n  id: \"\",\n  userName: \"\",\n  role: \"\",\n  password: \"\",\n};\n\nfunction AddUser() {\n  const [form, setForm] = useState(values);\n  const [method, setMethod] = useState(\"\");\n  const [show, setShow] = useState(false);\n  let history = useHistory();\n  let { id } = useParams();\n\n  // user data save\n  const submitUser = async (e) => {\n    e.preventDefault();\n\n    await axios\n      .post(\"http://localhost:8080/admin/add\", JSON.stringify(form), {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      })\n      .then((res) => {\n        if (res.data != null) {\n          setShow(true);\n          setMethod(\"post\");\n          setTimeout(() => userList(true), 1500);\n          setTimeout(() => setShow(false), 1500);\n        } else {\n          setShow(false);\n        }\n      });\n  };\n\n  // user data update\n  const updateUser = async (e) => {\n    e.preventDefault();\n\n    await axios\n      .put(`http://localhost:8080/admin/put/${id}`, JSON.stringify(form), {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      })\n      .then((res) => {\n        if (res.data != null) {\n          setShow(true);\n          setMethod(\"put\");\n          setTimeout(() => setShow(false), 1500);\n          setTimeout(() => userList(true), 1500);\n        } else {\n          setShow(false);\n        }\n      });\n  };\n\n  // to add in user list\n  const userChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n\n  // to reset user values that we wrote\n  const resetUser = () => {\n    setForm(values);\n  };\n\n  // back to user list\n  const userList = () => {\n    history.push(\"/list-users\");\n  };\n\n  // find user with id to show when we want to update\n  const findUserById = async (id) => {\n    await axios\n      .get(`http://localhost:8080/admin/get/${id}`)\n      .then((res) => {\n        if (res.data != null) {\n          setForm({\n            id: res.data.id,\n            userName: res.data.userName,\n            password: res.data.password,\n            role: res.data.role,\n          });\n        }\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  };\n\n  // for memo\n  useEffect(() => {\n    findUserById(id);\n  }, [id]);\n  console.log(method);\n  return (\n    <div>\n      <div style={{ display: show ? \"block\" : \"none\" }}>\n        <ToastComponent\n          children={{\n            show: show,\n            message: method === \"post\" ? \"User Saved!\" : \"User Updated!\",\n            type: \"success\",\n          }}\n        />\n      </div>\n\n      <Card\n        className={\"border border-dark bg-dark text-white\"}\n        style={{ margin: \"45px 0px\" }}\n      >\n        <Card.Header>{id ? \"Update User\" : \"Save User\"}</Card.Header>\n\n        <Form\n          id=\"userFormId\"\n          onSubmit={id ? updateUser : submitUser}\n          onReset={resetUser}\n        >\n          <Card.Body>\n            <Form.Group as={Col} controlId=\"fromGridUserName\">\n              <Form.Label>Username</Form.Label>\n              <Form.Control\n                required\n                autoComplete=\"off\"\n                type=\"text\"\n                name=\"userName\"\n                placeholder=\"Enter Username\"\n                className={\"bg-dark text-white\"}\n                onChange={userChange}\n                value={form.userName}\n              />\n            </Form.Group>\n            <Form.Group as={Col}>\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                required\n                autoComplete=\"off\"\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"Enter pass\"\n                className={\"bg-dark text-white\"}\n                onChange={userChange}\n                value={form.password}\n              />\n            </Form.Group>\n            <Form.Group as={Col}>\n              <Form.Label>Role</Form.Label>\n              <Form.Control\n                required\n                autoComplete=\"off\"\n                type=\"text\"\n                name=\"role\"\n                placeholder=\"Enter Role\"\n                className={\"bg-dark text-white\"}\n                onChange={userChange}\n                value={form.role}\n              />\n            </Form.Group>\n          </Card.Body>\n          {/* footer */}\n          <Card.Footer style={{ textAlign: \"right\" }}>\n            <Button\n              size=\"sm\"\n              type=\"submit\"\n              variant=\"success\"\n              style={{ margin: \"2px\" }}\n            >\n              {id ? \"Update\" : \"Save\"}\n            </Button>\n            <Button\n              size=\"sm\"\n              type=\"reset\"\n              variant=\"info\"\n              style={{ margin: \"2px\" }}\n            >\n              Reset\n            </Button>\n            <Button\n              size=\"sm\"\n              type=\"button\"\n              variant=\"info\"\n              style={{ margin: \"2px\" }}\n              onClick={userList}\n            >\n              User List\n            </Button>\n          </Card.Footer>\n        </Form>\n      </Card>\n    </div>\n  );\n}\n\nexport default AddUser;\n"]},"metadata":{},"sourceType":"module"}