{"version":3,"file":"index.js","sources":["../node_modules/@swc/helpers/src/_array_with_holes.js","../node_modules/@swc/helpers/src/_iterable_to_array.js","../node_modules/@swc/helpers/src/_non_iterable_rest.js","../node_modules/@swc/helpers/src/_define_property.js","../node_modules/@swc/helpers/src/_object_spread.js","../node_modules/@swc/helpers/src/_object_without_properties_loose.js","../node_modules/@swc/helpers/src/_object_without_properties.js","../node_modules/@swc/helpers/src/_sliced_to_array.js","../src/chart.tsx","../src/typedCharts.tsx"],"sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import defineProperty from './_define_property';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n","import objectWithoutPropertiesLoose from './_object_without_properties_loose';\n\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","import React, {\n  useEffect,\n  useState,\n  useRef,\n  useImperativeHandle,\n  useMemo,\n  forwardRef,\n} from 'react';\nimport type { Ref, MouseEvent } from 'react';\nimport ChartJS from 'chart.js/auto';\nimport type { ChartData, ChartType, DefaultDataPoint } from 'chart.js';\nimport merge from 'lodash/merge';\nimport assign from 'lodash/assign';\nimport find from 'lodash/find';\n\nimport { Props, ChartJSOrUndefined, TypedChartComponent } from './types';\n\nfunction ChartComponent<\n  TType extends ChartType = ChartType,\n  TData = DefaultDataPoint<TType>,\n  TLabel = unknown\n>(\n  {\n    height = 150,\n    width = 300,\n    redraw = false,\n    type,\n    data,\n    options,\n    plugins = [],\n    getDatasetAtEvent,\n    getElementAtEvent,\n    getElementsAtEvent,\n    fallbackContent,\n    onClick: onClickProp,\n    ...props\n  }: Props<TType, TData, TLabel>,\n  ref: Ref<ChartJS<TType, TData, TLabel>>\n) {\n  type TypedChartJS = ChartJSOrUndefined<TType, TData, TLabel>;\n  type TypedChartData = ChartData<TType, TData, TLabel>;\n\n  const canvas = useRef<HTMLCanvasElement>(null);\n\n  const computedData = useMemo<TypedChartData>(() => {\n    if (typeof data === 'function') {\n      return canvas.current\n        ? data(canvas.current)\n        : {\n            datasets: [],\n          };\n    } else return merge({}, data);\n  }, [data, canvas.current]);\n\n  const [chart, setChart] = useState<TypedChartJS>();\n\n  useImperativeHandle<TypedChartJS, TypedChartJS>(ref, () => chart, [chart]);\n\n  const renderChart = () => {\n    if (!canvas.current) return;\n\n    setChart(\n      new ChartJS(canvas.current, {\n        type,\n        data: computedData,\n        options,\n        plugins,\n      })\n    );\n  };\n\n  const onClick = (event: MouseEvent<HTMLCanvasElement>) => {\n    if (onClickProp) {\n      onClickProp(event);\n    }\n\n    if (!chart) return;\n\n    getDatasetAtEvent &&\n      getDatasetAtEvent(\n        chart.getElementsAtEventForMode(\n          event.nativeEvent,\n          'dataset',\n          { intersect: true },\n          false\n        ),\n        event\n      );\n    getElementAtEvent &&\n      getElementAtEvent(\n        chart.getElementsAtEventForMode(\n          event.nativeEvent,\n          'nearest',\n          { intersect: true },\n          false\n        ),\n        event\n      );\n    getElementsAtEvent &&\n      getElementsAtEvent(\n        chart.getElementsAtEventForMode(\n          event.nativeEvent,\n          'index',\n          { intersect: true },\n          false\n        ),\n        event\n      );\n  };\n\n  const updateChart = () => {\n    if (!chart) return;\n\n    if (options) {\n      chart.options = { ...options };\n    }\n\n    if (!chart.config.data) {\n      chart.config.data = computedData;\n      chart.update();\n      return;\n    }\n\n    const { datasets: newDataSets = [], ...newChartData } = computedData;\n    const { datasets: currentDataSets = [] } = chart.config.data;\n\n    // copy values\n    assign(chart.config.data, newChartData);\n\n    chart.config.data.datasets = newDataSets.map((newDataSet: any) => {\n      // given the new set, find it's current match\n      const currentDataSet = find(\n        currentDataSets,\n        d => d.label === newDataSet.label && d.type === newDataSet.type\n      );\n\n      // There is no original to update, so simply add new one\n      if (!currentDataSet || !newDataSet.data) return { ...newDataSet };\n\n      if (!currentDataSet.data) {\n        // @ts-expect-error Need to refactor\n        currentDataSet.data = [];\n      } else {\n        // @ts-expect-error Need to refactor\n        currentDataSet.data.length = newDataSet.data.length;\n      }\n\n      // copy in values\n      assign(currentDataSet.data, newDataSet.data);\n\n      // apply dataset changes, but keep copied data\n      assign(currentDataSet, { ...newDataSet, data: currentDataSet.data });\n      return currentDataSet;\n    });\n\n    chart.update();\n  };\n\n  const destroyChart = () => {\n    if (chart) chart.destroy();\n  };\n\n  useEffect(() => {\n    renderChart();\n\n    return () => destroyChart();\n  }, []);\n\n  useEffect(() => {\n    if (redraw) {\n      destroyChart();\n      setTimeout(() => {\n        renderChart();\n      }, 0);\n    } else {\n      updateChart();\n    }\n  });\n\n  return (\n    <canvas\n      ref={canvas}\n      role='img'\n      height={height}\n      width={width}\n      onClick={onClick}\n      {...props}\n    >\n      {fallbackContent}\n    </canvas>\n  );\n}\n\nexport const Chart = forwardRef(ChartComponent) as TypedChartComponent;\n","import React, { forwardRef } from 'react';\nimport { ChartType } from 'chart.js';\n\nimport { Props, ChartJSOrUndefined, TypedChartComponent } from './types';\nimport { Chart } from './chart';\n\nfunction createTypedChart<T extends ChartType>(type: T) {\n  return forwardRef<ChartJSOrUndefined<T>, Omit<Props<T>, 'type'>>(\n    (props, ref) => <Chart {...props} ref={ref} type={type} />\n  ) as TypedChartComponent<T, true>;\n}\n\nexport const Line = createTypedChart('line');\n\nexport const Bar = createTypedChart('bar');\n\nexport const Radar = createTypedChart('radar');\n\nexport const Doughnut = createTypedChart('doughnut');\n\nexport const PolarArea = createTypedChart('polarArea');\n\nexport const Bubble = createTypedChart('bubble');\n\nexport const Pie = createTypedChart('pie');\n\nexport const Scatter = createTypedChart('scatter');\n"],"names":["defineProperty","objectWithoutPropertiesLoose","arrayWithHoles","iterableToArrayLimit","nonIterableRest","useRef","useMemo","merge","useState","useImperativeHandle","ChartJS","assign","find","useEffect","forwardRef"],"mappings":"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"}